<!DOCTYPE html><html lang="udm" dir="ltr" prefix="og: https://ogp.me/ns# article: https://ogp.me/article# scm: https://schema.org/"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>XKB тупатъян тамуг</title><meta name="description" content="X Keyboard гожъян амалдэ тупатыны паськыт луонлыкъёс сётэ — но соосты кутыны нырысь ик амал шедьтоно луэ."><meta property="og:type" content="article"><meta property="og:locale" content="udm_RU"><meta property="og:site_name" content="Коӵышгу"><meta property="og:image" content="https://kotwys.github.io/articles/xkb-configuration/cover.jpg"><meta property="og:title" content="XKB тупатъян тамуг"><meta property="og:url" content="https://kotwys.github.io/articles/xkb-configuration/"><meta property="og:description" content="X Keyboard гожъян амалдэ тупатыны паськыт луонлыкъёс сётэ — но соосты кутыны нырысь ик амал шедьтоно луэ."><meta property="og:image:alt" content="Нюртэтпул, шорысьтыз куинь нюртэт шуэ «X K B»"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:creator" content="@kotwys"><meta property="telegram:channel" content="@ktwsgu"><meta property="article:author" content="Коӵыш Микайло"><meta property="article:published_time" content="2021-07-12T00:00:00.000Z"><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="Коӵышгу — Гожъямъёс"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/styles/light.css"><link rel="stylesheet" href="/styles/dark.css" media="(prefers-color-scheme: dark)"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/styles/article.css"><link rel="me" href="https://twitter.com/kotwys"><link rel="me" href="https://mastodon.social/@kotwys"><link rel="me" href="https://github.com/kotwys"><link rel="webmention" href="https://webmention.io/kotwys.github.io/webmention"><link rel="pingback" href="https://webmention.io/kotwys.github.io/xmlrpc"><link rel="canonical" href="https://kotwys.github.io/articles/xkb-configuration/"><meta name="theme-color" content="#3b2425"></head><body><header class="header theme-hero main-pad"><a class="header__logo" href="/" aria-label="Дорбаме"><img src="/assets/logo.svg" width="24"></a><div class="header-drawer"><button class="header-drawer__button init" title="Менюез усьтоно" aria-controls="header-drawer" aria-expanded="false"><svg class="icon"><use id="header-drawer-icon" href="/assets/icons/sprite.svg#menu-2-line"/></svg></button><div class="header-drawer__content" id="header-drawer"><nav class="nav"><ul><li><a class="hollow-link" href="/articles">Гожъямъёс</a></li><li><a class="hollow-link">Кыллюкам</a></li></ul></nav></div></div><div class="header__progress"></div></header><main><article about="https://kotwys.github.io/articles/xkb-configuration/" typeof="scm:Article"><header class="article-hero hero theme-hero article-hero_has-image prose"><div class="main-margin"><h1 class="article-hero__heading" property="scm:headline scm:name">XKB тупатъян тамуг</h1><p property="scm:abstract">X Keyboard гожъян амалдэ тупатыны паськыт луонлыкъёс сётэ — но соосты кутыны нырысь ик амал шедьтоно луэ.</p><p class="article-hero__meta"><time property="scm:datePublished" datetime="2021-07-12T00:00:00.000Z">12. пст 2021 </time><span rel="scm:creator scm:author"><span resource="https://kotwys.github.io#me" typeof="scm:Person"><span property="scm:familyName">Коӵыш</span> <span property="scm:givenName">Микайло</span> </span></span><span>4 минут лыдӟон</span> <a rel="alternate scm:workTranslation" href="/articles/xkb-configuration/en.html" hreflang="en">English</a></p></div><figure class="article-hero__image"><img rel="scm:thumbnailUrl scm:image" src="cover.jpg" alt="Нюртэтпул, шорысьтыз куинь нюртэт шуэ «X K B»"></figure></header><div id="toc" class="main-margin toc"><nav class="main-margin toc__nav" id="toc-content"><div class="position: relative;"><h2 class="toc__heading">Пуштросэз</h2><button aria-controls="toc-toplevel" class="toc__expand" aria-expanded="true" title="Пуштросэз ватоно"><svg class="icon"><use href="/assets/icons/sprite.svg#arrow-down-s-line"/></svg></button></div><ul class="toc__list" id="toc-toplevel"><li class="toc__item"><a class="toc__link" href="#%D1%83%D0%B6%D0%BF%D1%83%D0%BC">Ужпум</a></li><li class="toc__item"><a class="toc__link" href="#%D1%82%D1%83%D0%BF%D0%B0%D1%82%D1%8A%D1%8F%D0%BD">Тупатъян</a> <button class="toc__expand" aria-controls="toc-%D1%82%D1%83%D0%BF%D0%B0%D1%82%D1%8A%D1%8F%D0%BD" aria-expanded="true" title="«Тупатъян» люкетэз пыр-поч"><svg class="icon"><use href="/assets/icons/sprite.svg#arrow-down-s-line"/></svg></button><ul id="toc-%D1%82%D1%83%D0%BF%D0%B0%D1%82%D1%8A%D1%8F%D0%BD" class="toc__list"><li class="toc__item"><a class="toc__link" href="#%D1%8D%D1%81%D1%8D%D0%BF%D1%80%D0%B0%D0%B4%D1%8A%D1%91%D1%81">Эсэпрадъёс</a></li></ul></li><li class="toc__item"><a class="toc__link" href="#comments">Коментаръёс</a></li></ul></nav></div><div class="article__content prose prose-wide" data-track><aside><p>УК;ӦЛ: NixOS:эз кутӥськоды ке, дась модулез <a href="https://github.com/kotwys/lymypyry/blob/main/modules/extra-xkb-options.nix">лымыпырыысьтым</a> басьтэмды луэ.</p></aside><p>XKB (X Keyboard) – со Linux:лэн юзчи котыретысьтыз <span title="клавиатура" data-word="нюртэтпул">нюртэтпулэз</span> каньыл кутон понна кыл кутӥсез люкетыз. Солы луыса ик асьмелэн вань пӧртэм кылъёс но радъямъёс, кылсярысь.</p><p>Нимызъя ай валамон, со XFree86 юнман дыре кылдэм шуыса. Но али гинэ но, Wayland дорамы вуыса, XKB Linux-сӧзнэтъёсын кыле. Нош документъянэз ог куамын ар ортчыса кыдёке вуымтэ кадь.</p><h2 id="%D1%83%D0%B6%D0%BF%D1%83%D0%BC" tabindex="-1">Ужпум</h2><figure><img src="https://ilyabirman.ru/typography-layout/i/layout-win@2x.png" alt=""><figcaption>Илья Бирманлэн тӥпограф радъямез</figcaption></figure><p>Мон кемалась кутӥсько <a href="https://ilyabirman.ru/projects/typography-layout/">Илья Бирманлэсь тӥпограф радъямзэ</a> (мыным дун ӧз тыре). Соин тарак каньыл пӧртэм пусъёс гожъяны луэ, удмуртъёссэ но. Нош Лӥнуксын со ӧвӧл кадь… ӧвӧл-а?</p><p>Кудняласен ке XKB:ын вань ни <code>misc:typo</code> пуктэт, со тӥпограф радъям вылэ ик инъямын, пе. «Ваньмем нюртэтъёс» нош отын ӧвӧл (кудъёсыз собере зӥбем <span title="клавиша" data-word="нюртэт">нюртэтэн</span> ӵош сёто одӥг дӥакритӥкен пус, ⟨ӧ⟩ кадь). Ӧйтӧд, малы сыӵе каремын — оло, Илья Бирманлэсь ужзэ быдэсак кӧчыртонтэм вылысь (эрико небытбур ук!), оло, тырмыт калыккуспо ӧвӧл шуыса. Кыӵе бен малыез ӧй луысал, соин мар ке кароно вал.</p><p>Вотэс пӧлын вань <a href="https://github.com/neochief/birman-typography-layouts-for-ubuntu">Ubuntu:лы дасям радъям</a>. Со но шектэм ӧвӧл вылэм, одӥг-ог пус ыштэм. Вылаз ик, сю арысь огпол XKB выльдӥськыку кышъетэз выльысь пуктыны. Соин ик ачим кыӵе-мар тодоно кариськи.</p><h2 id="%D1%82%D1%83%D0%BF%D0%B0%D1%82%D1%8A%D1%8F%D0%BD" tabindex="-1">Тупатъян</h2><p>Радъямъёс но пуктэтъёс ваньмыз пус люкамъёс луо. Со сяна XKB нюртэмъёсты возьма, нюртэтпул дорысь потась кодъёс валэктэ но мукетыз — асьмелы со тунсыко ӧвӧл.</p><p>Радъямъёс нюртэтъёсты ваньзэ тырем карисько, пуктэтъёс нош — куд-огзэс, нырысетӥезлы сыӵе <em>сураськон</em> луыса. Со сяна, соос одӥг арбери бере, огез пушкы мукетсэ пыртыны луэ.</p><pre><code>/usr/share/X11/xkb/symbols/us

// Таиз радъям.
// Куинь нырысетӥез кыл тунсыко ӧвӧл, соос радъямлэсь кӧня ке куара-лыд пус 
// тыремзэ гинэ пусъё.
partial alphanumeric_keys default
xkb_symbols &quot;basic&quot; {
  keys &lt;AD01&gt; { [ q, Q ] };
  keys &lt;AD02&gt; { [ w, W ] };
  // но озьы азьлань
};

/usr/share/X11/xkb/symbols/typo

// Таиз пуктэт.
partial alphanumeric_keys
xkb_symbols &quot;deadkeys&quot; {
  // Пуслюкамъёс троссэ ньыль пагӟалэсь пӧрмо. Котьку сямен соос тазьы сэзьдо:
  //                 1.        2.        3.         4.
  //                         Shift     AltGr    Shift+AltGr
  keys &lt;AD01&gt; { [ NoSymbol, NoSymbol, NoSymbol, dead_breve ] };
  keys &lt;AD04&gt; { [ NoSymbol, NoSymbol, NoSymbol, dead_abovering ] };
  // но озьы азьалнь
};

// Нош татын ваньзэ огазе кариськом
partial alphanumeric_keys
xkb_symbols &quot;layout_extra&quot; {
  include &quot;us(basic)+deadkeys+level3(ralt_switch)&quot;
};
</code></pre><p>Вылӥысь гожтэм ватса <code>layout_extra</code> радъямез. AltGr (бурпалась Alt) но бадӟым Q огдыре зӥбыса кылдоз олокыӵе отӥяз пыртэм пус вылэ лякиськоно бреве (<span data-latin-skip>Й</span> гожпус вылысь кадь ик). <code>layout_extra</code> шара пыртэ <code>level3(ralt_switch)</code> пуктэтэз, AltGr куиньметӥ пагӟае выжтон мед луоз шуыса — вань мукетъёсыз пуктэтъёс (Windows:лэсь пӧртэм луыса, шонер луисько ке).</p><p>Таиз люкетыз секыт ӧвӧл — пусъёсты гожтыса кӧня ке пуконо луоз гинэ (но эн вунэтэ виштыкугӟетэз <code>xkb_symbols</code> ялэм бере). Сӧзнэтлы сое адӟымон каронэз — маиз секытэз.</p><p>XKB:ысь ваньмыз сюре бадӟым эсэпрадъёсын лыдметэ. Котьку сямен со <code>rules/evdev</code>, вань мукетъёсыз но. Та ужкагазын гожтэмын, ку, кызьы но кытын со-мар пуслюкамъёс итӥсько.</p><p>Радъямъёс понна азьвыл поттэм <a href="https://github.com/neochief/birman-typography-layouts-for-ubuntu">Ubuntu:лы радъямез</a> учкемды луэ. Мон нош валэкто пуктэтъёслэн кызьы ужамзэс.</p><h3 id="%D1%8D%D1%81%D1%8D%D0%BF%D1%80%D0%B0%D0%B4%D1%8A%D1%91%D1%81" tabindex="-1">Эсэпрадъёс</h3><p>Ваньмыз пуктэт evdev:ын ӧжытсэ одӥг люкетаз сюре:</p><pre><code>/usr/share/X11/xkb/rules/evdev

! option = symbols
  grp:shift_toggle = +group(shifts_toggle)
  grp:switch = +group(grp_switch)
  // но озьы азьлань
</code></pre><p>Тани, кыктэтӥ кесэгысь пуслюкамъёс адӟымон луо нырысетӥ кесэгысь нимын. Собере соосты <code>setxkbmap</code> яке мукет юзчи азьдор пыр пуктыны луэ.</p><pre><code>$ setxkbmap -option grp:shift_toggle
</code></pre><p>Нялтас вераса, та пуктэтъёс (<code>grp:*</code>) пусгрупаез воштон амалэз пусъё. Ваньмыз пӧртэм радъямъёс зэмзэ огез вылэ мукетыз понэм пусгрупаос луо, со юзчилэсь умой ватэмын ке но. Со пусгрупаос огазе одӥг бадӟым радъямлы пӧрмо.</p><figure><img width="900" src="groups.jpg" alt="Улӥын англи пусгрупа +en:1, вылӥяз — ӟуч +ru:2"><figcaption>Улӥын англи пусгрупа +en:1, вылӥяз — ӟуч +ru:2</figcaption></figure><p>Тӥпограф радъямез лэсьтыны утчаса, мыным кулэ вал сое ӟуч но англи кылъёсын кутыны. Нош… со тазьы капчи ӧвӧл вылэм.</p><p>Ӟуч но англи радъямъёс пӧртэм пусгрупаос луыса, котькудӥзлы быдэ пуктэтэз нимаз поныны кулэ. Сотэк со англи пусгрупаын гинэ кутымон луоз (англиез нырысетӥез радъямды ке).</p><p>Эсэпрад лыдметын бугыртыса, шедьтӥ, <code>misc:typo</code> но огез мукетыз пуктэт аспӧртэм луо шуыса. Соос вератэк котькудӥз пусгрупа борды итӥсько шуыса. Нош со тазьы гожтэмын лыдметын:</p><pre><code>! layout    option    = symbols
  *         misc:typo   +typo(base)

! layout[1] option    = symbols
  *         misc:typo   +typo(base):1

! layout[2] option    = symbols
  *         misc:typo   +typo(base):2

// но озьы ньылёзь
</code></pre><p>Мукет сямен вераса, ваньмыз пусгрупалы быдэ, <code>misc:typo</code> пуктэмын ке, кулэ луись пуслюкам итӥське верам кеме мыныса (<code>+...:n</code>).</p><p>Соин ик, выль ваньмем пусъёсты ваньмыз радъямын кутымон карыны понна, та чуръёсты ватсано (нимез но <code>n</code> тупасьлы воштыса).</p><pre><code>  en &lt;ним&gt; = +typo(deadkeys):n
  ru &lt;ним&gt; = +typo(deadkeys):n
</code></pre></div></article><section class="main-margin"><h2 id="comments" class="visually-hidden">Коментаръёс</h2><script async src="https://telegram.org/js/telegram-widget.js?15" data-telegram-discussion="ktwsgu" data-comments-limit="5" data-color="772428"></script></section></main><footer class="footer theme-hero main-pad"><section class="prose"><p style="font-style: italic;">Коӵыш Микайло</p><p>Солэсь но троссэ <a href="https://t.me/ktwsgu">«Коӵышгу» тэлеграм каналысьтым</a> лыдӟе!</p><p>Вотэсбамез люкам нунал: 30. пст 2023</p></section><section><h2 class="visually-hidden">Вотэсбамтӥ навигация</h2><nav class="nav"><ul><li><a class="hollow-link" href="/articles">Гожъямъёс</a></li><li><a class="hollow-link">Кыллюкам</a></li></ul></nav></section><section><h2 class="visually-hidden">Монэн герӟаськон</h2><ul class="socials"><li><a class="social-link" href="https://t.me/kotwys"><span class="icon" title="Telegram"><svg class="icon"><use href="/assets/icons/sprite.svg#send-plane-2-line"/></svg> </span><span>@kotwys</span></a></li><li><a class="social-link" href="https://twitter.com/kotwys"><span class="icon" title="Twitter"><svg class="icon"><use href="/assets/icons/sprite.svg#twitter-line"/></svg> </span><span>@kotwys</span></a></li><li><a class="social-link" href="https://github.com/kotwys"><span class="icon" title="GitHub"><svg class="icon"><use href="/assets/icons/sprite.svg#github-line"/></svg> </span><span>@kotwys</span></a></li><li><a class="social-link" href="https://mastodon.social/@kotwys"><span class="icon" title="Mastodon"><svg class="icon"><use href="/assets/icons/sprite.svg#mastodon-line"/></svg></span></a></li></ul></section></footer><script type="module" src="/scripts/index.js"></script><script type="module" src="/scripts/toc.js"></script></body></html>